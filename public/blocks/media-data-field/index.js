(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"x3p0/media-data-field","version":"1.0.0","title":"Media Data Field","category":"media","icon":"tag","description":"Display a single data field for media.","keywords":["media","metadata","field","meta"],"parent":["x3p0/media-data"],"textdomain":"x3p0-media-data","supports":{"html":false,"__experimentalStyle":{"css":"&.is-layout-flex { gap: var(--wp--custom--x-3-p-0-media-data--gap, 0.5rem); }","spacing":{"blockGap":"var(--wp--custom--x-3-p-0-media-meta--gap, 0.5rem)"}},"spacing":{"margin":true,"padding":true},"color":{"text":true,"background":true,"link":true},"layout":{"allowCustomContentAndWideSize":false,"allowEditing":false,"allowInheriting":false,"allowJustification":true,"allowOrientation":true,"allowSizingOnChildren":false,"allowSwitching":true,"allowVerticalAlignment":true,"default":{"type":"flex","flexWrap":"wrap","orientation":"horizontal","justifyContent":"space-between"}},"typography":{"fontSize":true,"lineHeight":true}},"usesContext":["x3p0-media-data/mediaId","x3p0-media-data/metadata"],"attributes":{"field":{"type":"string","default":"title","role":"content"},"label":{"type":"string","default":"","role":"content"}},"editorScript":"file:./index.js","render":"file:./render.php"}'),a=window.wp.data,i=window.wp.coreData,d=window.wp.blockEditor,l=window.wp.components,n=window.wp.i18n,s=window.ReactJSXRuntime,m=({mediaId:e,onSelectMedia:t,onRemoveMedia:m})=>{const r=function(e){return(0,a.useSelect)(t=>e?t(i.store).getEntityRecord("postType","attachment",e):null,[e])}(e);return(0,s.jsx)(d.MediaReplaceFlow,{mediaId:e,mediaURL:r?.source_url,accept:"*",onSelect:e=>{e?.id&&t(e)},name:(0,n.__)("Replace","x3p0-media-data"),popoverProps:{placement:"bottom-start"},children:e&&(0,s.jsx)(l.MenuItem,{onClick:m,children:(0,n.__)("Reset","x3p0-media-data")})})},r=window.wp.element;function o(e){return(0,a.useSelect)(t=>{const{getBlockParents:a,getBlockIndex:i}=t(d.store),l=a(e);return{parentClientId:l[l.length-1],blockIndex:i(e)}},[e])}const p={1:(0,n.__)("Normal","x3p0-media-data"),2:(0,n.__)("Mirrored Horizontally","x3p0-media-data"),3:(0,n.__)("Rotated 180&deg;","x3p0-media-data"),4:(0,n.__)("Mirrored Vertically","x3p0-media-data"),5:(0,n.__)("Rotated 90&deg;, Mirrored Horizontally","x3p0-media-data"),6:(0,n.__)("Rotated 90&deg;","x3p0-media-data"),7:(0,n.__)("Rotated 270&deg;, Mirrored Horizontally","x3p0-media-data"),8:(0,n.__)("Rotated 270&deg;","x3p0-media-data")},h=[{
// Translators: Unit symbol for yottabyte.
unit:(0,n._x)("YB","unit symbol","x3p0-media-data"),magnitude:1024**8},{
// Translators: Unit symbol for zettabyte.
unit:(0,n._x)("ZB","unit symbol","x3p0-media-data"),magnitude:1024**7},{
// Translators: Unit symbol for exabyte.
unit:(0,n._x)("EB","unit symbol","x3p0-media-data"),magnitude:1024**6},{
// Translators: Unit symbol for petabyte.
unit:(0,n._x)("PB","unit symbol","x3p0-media-data"),magnitude:1024**5},{
// Translators: Unit symbol for terabyte.
unit:(0,n._x)("TB","unit symbol","x3p0-media-data"),magnitude:1024**4},{
// Translators: Unit symbol for gigabyte.
unit:(0,n._x)("GB","unit symbol","x3p0-media-data"),magnitude:1024**3},{
// Translators: Unit symbol for megabyte.
unit:(0,n._x)("MB","unit symbol","x3p0-media-data"),magnitude:1048576},{
// Translators: Unit symbol for kilobyte.
unit:(0,n._x)("KB","unit symbol","x3p0-media-data"),magnitude:1024},{
// Translators: Unit symbol for byte.
unit:(0,n._x)("B","unit symbol","x3p0-media-data"),magnitude:1}];function x(e,t){return e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}function v(e,t){return 0===t?e:v(t,e%t)}function c(e,t){const a=v(e,t);return`${e/a}:${t/a}`}function _(e,t,a=""){var i;return null!==(i=t.split(".").reduce((e,t)=>e?.[t],e))&&void 0!==i?i:a}const u=window.wp.date,w={album:e=>_(e,"media_details.album"),aperture:e=>{const t=_(e,"media_details.image_meta.aperture");return t?function(e){if(!e&&0!==e)return"";if("string"==typeof e&&e.includes("/")){const t=e.split("/");if(2===t.length){const a=parseFloat(t[0]),i=parseFloat(t[1]);isNaN(a)||isNaN(i)||0===i||(e=a/i)}}return"string"==typeof e&&(e=parseFloat(e)),isNaN(e)||e<=0?"":"f/"+e.toFixed(2).replace(/\.?0+$/,"")}(t):""},artist:e=>_(e,"media_details.artist"),aspect_ratio:e=>{const t=_(e,"media_details.width"),a=_(e,"media_details.height");return t&&a?c(t,a):""},camera:e=>_(e,"media_details.image_meta.camera"),created_timestamp:e=>{const t=_(e,"media_details.created_timestamp")||_(e,"media_details.image_meta.created_timestamp");return t?(0,u.dateI18n)("F j, Y",new Date(1e3*t)):""},dimensions:e=>{const t=_(e,"media_details.width"),a=_(e,"media_details.height");return t&&a?(0,n.sprintf)(
// Translators: Media dimensions - 1 is width and 2 is height.
// Translators: Media dimensions - 1 is width and 2 is height.
(0,n.__)("%1$s &#215; %2$s","x3p0-media-data"),t.toLocaleString(),a.toLocaleString()):""},display_orientation:e=>{const t=_(e,"media_details.width"),a=_(e,"media_details.height");return t&&a?t>a?(0,n.__)("Landscape","x3p0-media-data"):a>t?(0,n.__)("Portrait","x3p0-media-data"):(0,n.__)("Square","x3p0-media-data"):""},file_name:e=>{let t=_(e,"media_details.file");var a;return t||(t=null!==(a=e?.source_url)&&void 0!==a?a:""),t?t.split(/[\\/]/).pop():""},file_size:e=>{const t=_(e,"media_details.filesize");return t?function(e,t=0){if(0===e)
// Translators: Unit symbol for byte.
return x(0,t)+" "+(0,n._x)("B","unit symbol","x3p0-media-data");for(const{unit:a,magnitude:i}of h)if(e>=i)return x(e/i,t)+" "+a;return!1}(Math.abs(Math.floor(t)),2):""},focal_length:e=>{const t=_(e,"media_details.image_meta.focal_length");return t?(0,n.sprintf)((0,n.__)("%s mm","x3p0-media-data"),t):""},genre:e=>_(e,"media_details.genre"),iso:e=>_(e,"media_details.image_meta.iso"),length_formatted:e=>_(e,"media_details.length_formatted"),mime_type:e=>_(e,"mime_type"),orientation:e=>{const t=_(e,"media_details.image_meta.orientation");return t&&p[t]?p[t]:""},shutter_speed:e=>function(e){if(!e)return"";const t=parseFloat(String(e).replace(/<[^>]*>/g,""));if(1/t>1){const e=1/t,a=x(e,e===Math.round(e)?0:1);return(0,n.sprintf)(
// Translators: %s is the shutter speed of a camera.
// Translators: %s is the shutter speed of a camera.
(0,n.__)("%s sec","x3p0-media-data"),`<sup>${x(1,0)}</sup>&#8260;<sub>${a}</sub>`)}return(0,n.sprintf)((0,n.__)("%s sec","x3p0-media-data"),t)}(_(e,"media_details.image_meta.shutter_speed")),title:e=>_(e,"title.rendered"),track_number:e=>_(e,"media_details.track_number"),year:e=>_(e,"media_details.year")};function g(e,t){const a=w[t];return a?a(e):""}const q={album:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M500-360q42 0 71-29t29-71v-220h120v-80H560v220q-13-10-28-15t-32-5q-42 0-71 29t-29 71q0 42 29 71t71 29ZM320-240q-33 0-56.5-23.5T240-320v-480q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320Zm0-80h480v-480H320v480ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm160-720v480-480Z"})}),aperture:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M456-600h320q-27-69-82.5-118.5T566-788L456-600Zm-92 80 160-276q-11-2-22-3t-22-1q-66 0-123 25t-101 67l108 188ZM170-400h218L228-676q-32 41-50 90.5T160-480q0 21 2.5 40.5T170-400Zm224 228 108-188H184q27 69 82.5 118.5T394-172Zm86 12q66 0 123-25t101-67L596-440 436-164q11 2 21.5 3t22.5 1Zm252-124q32-41 50-90.5T800-480q0-21-2.5-40.5T790-560H572l160 276ZM480-480Zm0 400q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q83 0 155.5 31.5t127 86q54.5 54.5 86 127T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Z"})}),artist:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M740-560h140v80h-80v220q0 42-29 71t-71 29q-42 0-71-29t-29-71q0-42 29-71t71-29q8 0 18 1.5t22 6.5v-208ZM120-160v-112q0-35 17.5-63t46.5-43q62-31 126-46.5T440-440q42 0 83.5 6.5T607-414q-20 12-36 29t-28 37q-26-6-51.5-9t-51.5-3q-57 0-112 14t-108 40q-9 5-14.5 14t-5.5 20v32h321q2 20 9.5 40t20.5 40H120Zm320-320q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T520-640q0-33-23.5-56.5T440-720q-33 0-56.5 23.5T360-640q0 33 23.5 56.5T440-560Zm0-80Zm0 400Z"})}),aspect_ratio:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M560-280h200v-200h-80v120H560v80ZM200-480h80v-120h120v-80H200v200Zm-40 320q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-480H160v480Zm0 0v-480 480Z"})}),camera:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M480-260q75 0 127.5-52.5T660-440q0-75-52.5-127.5T480-620q-75 0-127.5 52.5T300-440q0 75 52.5 127.5T480-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM160-120q-33 0-56.5-23.5T80-200v-480q0-33 23.5-56.5T160-760h126l74-80h240l74 80h126q33 0 56.5 23.5T880-680v480q0 33-23.5 56.5T800-120H160Z"})}),created_timestamp:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M580-240q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Z"})}),dimensions:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M760-600v-160H600v-80h240v240h-80ZM120-120v-240h80v160h160v80H120Zm0-320v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 640v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 640v-80h80v80h-80Zm160 0v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Z"})}),orientation:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M360-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h160v80H200v560h160v80Zm80 80v-880h80v880h-80Zm160-80v-80h80v80h-80Zm0-640v-80h80v80h-80Zm160 640v-80h80q0 33-23.5 56.5T760-120Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80h80v80h-80Zm0-160v-80q33 0 56.5 23.5T840-760h-80Z"})}),file_name:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M320-240h320v-80H320v80Zm0-160h320v-80H320v80ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"})}),file_size:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M120-160v-80h480v80H120Zm520-280q-83 0-141.5-58.5T440-640q0-83 58.5-141.5T640-840q83 0 141.5 58.5T840-640q0 83-58.5 141.5T640-440Zm-520-40v-80h252q7 22 16 42t22 38H120Zm0 160v-80h376q23 14 49 23.5t55 13.5v43H120Zm500-200h40v-160h-40v160Zm20-200q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6Z"})}),focal_length:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",version:"1.1",transform:"matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,0,0)",children:(0,s.jsx)("path",{d:"M40-840h880L480-80 40-840Zm139 80 69 120h464l69-120H179Zm116 200 69 120h232l69-120H295Zm116 200 69 120 69-120H411Z"})}),genre:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M400-240q50 0 85-35t35-85v-280h120v-80H460v256q-14-8-29-12t-31-4q-50 0-85 35t-35 85q0 50 35 85t85 35Zm80 160q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})}),length_formatted:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M480-240q100 0 170-70t70-170q0-100-70-170t-170-70v240L310-310q35 33 78.5 51.5T480-240Zm0 160q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})}),iso:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M40-360v-80h160v80H40Zm214-210L141-683l56-57 113 114-56 56Zm26 330v-120h400v120H280Zm160-440v-200h80v200h-80Zm266 110-56-56 113-113 57 56-114 113Zm54 210v-80h160v80H760Z"})}),mime_type:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M360-440h400L622-620l-92 120-62-80-108 140ZM120-120q-33 0-56.5-23.5T40-200v-520h80v520h680v80H120Zm160-160q-33 0-56.5-23.5T200-360v-440q0-33 23.5-56.5T280-880h200l80 80h280q33 0 56.5 23.5T920-720v360q0 33-23.5 56.5T840-280H280Zm0-80h560v-360H527l-80-80H280v440Zm0 0v-440 440Z"})}),display_orientation:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M240-320h360v-200H240v200Zm420-120h60v-200H360v60h300v140ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-480H160v480Zm0 0v-480 480Z"})}),shutter_speed:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M360-840v-80h240v80H360ZM480-80q-75 0-140.5-28.5T225-186q-49-49-77-114.5T120-440q0-74 28.5-139.5T226-694q49-49 114.5-77.5T480-800q63 0 120 21t104 59l58-58 56 56-56 58q36 47 57 104t21 120q0 74-28 139.5T735-186q-49 49-114.5 77.5T480-80Zm0-360Zm0-80h268q-18-62-61.5-109T584-700L480-520Zm-70 40 134-232q-59-15-121.5-2.5T306-660l104 180Zm-206 80h206L276-632q-42 47-62.5 106.5T204-400Zm172 220 104-180H212q18 62 61.5 109T376-180Zm40 12q66 17 128 1.5T654-220L550-400 416-168Zm268-80q44-48 63.5-107.5T756-480H550l134 232Z"})}),title:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M240-560h360v-120H240v120Zm-40 440q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z"})}),track_number:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M640-160q-50 0-85-35t-35-85q0-50 35-85t85-35q11 0 21 1.5t19 6.5v-328h200v80H760v360q0 50-35 85t-85 35ZM120-320v-80h320v80H120Zm0-160v-80h480v80H120Zm0-160v-80h480v80H120Z"})}),year:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)("path",{d:"M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Z"})})};function f(){return(0,a.useSelect)(t=>{const a=t(e.store).getBlockVariations("x3p0/media-data-field");return a?a.map(e=>({value:e.attributes.field,label:e.title})).sort((e,t)=>e.label.localeCompare(t.label)):[]},[])}const T=e=>{const t=e.context["x3p0-media-data/mediaId"],{parentClientId:i}=o(e.clientId),{updateBlockAttributes:l}=(0,a.useDispatch)(d.store);return i&&(0,s.jsx)(m,{mediaId:t,onSelectMedia:e=>l(i,{mediaId:e.id}),onRemoveMedia:()=>l(i,{mediaId:0})})},Z=e=>(0,s.jsx)(d.BlockControls,{group:"other",children:(0,s.jsx)(T,{...e})}),y=window.wp.compose,b=({attributes:{field:e,label:t},setAttributes:a})=>{const i=(0,y.useInstanceId)(b),d=f();return(0,s.jsxs)(l.__experimentalToolsPanel,{label:(0,n.__)("Settings","x3p0-breadcrumbs"),resetAll:()=>a({field:"title",label:void 0}),panelId:i,children:[(0,s.jsx)(l.__experimentalToolsPanelItem,{label:(0,n.__)("Field","x3p0-media-data"),hasValue:()=>"title"!==e,onDeselect:()=>a({field:"title"}),panelId:i,isShownByDefault:!0,children:(0,s.jsx)(l.SelectControl,{label:(0,n.__)("Field","x3p0-media-data"),value:e,options:d,onChange:e=>a({field:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})},"x3p0-media-data-panel-field"),(0,s.jsx)(l.__experimentalToolsPanelItem,{label:(0,n.__)("Label","x3p0-media-data"),hasValue:()=>"title"!==e,onDeselect:()=>a({field:"title"}),panelId:i,isShownByDefault:!0,children:(0,s.jsx)(l.TextControl,{label:(0,n.__)("Label","x3p0-media-data"),placeholder:d.find(t=>t.value===e)?.label||(0,n.__)("Data","x3p0-media-data"),value:t,onChange:e=>a({label:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})},"x3p0-media-data-panel-label")]})},j=b,H=e=>(0,s.jsx)(d.InspectorControls,{group:"settings",children:(0,s.jsx)(j,{...e})}),M=t=>{const{attributes:m,setAttributes:p,context:h,clientId:x,isSelected:v}=t,{field:c,label:_}=m,u=h["x3p0-media-data/mediaId"],w=h["x3p0-media-data/metadata"],q=(T=w,(0,a.useSelect)(()=>!!(0,e.getBlockBindingsSource)(T?.bindings?.mediaId?.source),[T?.bindings?.mediaId]));var T;const Z=f(),{fieldValue:y,isResolving:b}=function(e,t){return(0,a.useSelect)(a=>{if(!e)return{media:null,fieldValue:null,isResolving:!1};const d=a(i.store).getEntityRecord("postType","attachment",e);return{media:d,fieldValue:g(d,t),isResolving:!a(i.store).hasFinishedResolution("getEntityRecord",["postType","attachment",e])}},[e,t])}(u,c);!function(t,i,l="x3p0/media-data-field",n=".wp-block-x3p0-media-data-field__label"){const{insertBlock:s,selectBlock:m}=(0,a.useDispatch)(d.store),{parentClientId:p,blockIndex:h}=o(t);(0,r.useEffect)(()=>{if(!i)return;const t=t=>{const a=n&&t.target.closest(n);if("Enter"===t.key&&!a){t.preventDefault();const a=(0,e.createBlock)(l);s(a,h+1,p),m(a.clientId)}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[i,h,p,s,m,l,n])}(x,v);const j=(0,d.useBlockProps)({className:`wp-block-x3p0-media-data-field--${c?c.replace(/_/g,"-"):"title"}`});return u||q?(0,s.jsxs)("div",{...(0,d.useInnerBlocksProps)(j),children:[(0,s.jsx)(d.RichText,{tagName:"div",className:"wp-block-x3p0-media-data-field__label",value:_,onChange:e=>p({label:e}),placeholder:Z.find(e=>e.value===c)?.label||(0,n.__)("Data","x3p0-media-data")}),(0,s.jsx)("div",{className:"wp-block-x3p0-media-data-field__value",children:b?(0,n.__)("Loading…","x3p0-media-data"):y?(0,s.jsx)(r.RawHTML,{children:y}):q?(0,n.__)("Connected to custom media source","x3p0-media-data"):(0,n.__)("No data","x3p0-media-data")})]}):(0,s.jsx)("div",{...j,children:(0,s.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,n.__)("No connected media ID.","x3p0-media-data")})})},B=window.wp.primitives,D=[{name:"album",title:(0,n.__)("Album","x3p0-media-data"),description:(0,n.__)("Displays the audio album.","x3p0-media-data")},{name:"aperture",title:(0,n.__)("Aperture","x3p0-media-data"),description:(0,n.__)("Displays the camera aperture (f-stop).","x3p0-media-data")},{name:"artist",title:(0,n.__)("Artist","x3p0-media-data"),description:(0,n.__)("Displays the audio artist.","x3p0-media-data")},{name:"aspect_ratio",title:(0,n.__)("Aspect Ratio","x3p0-media-data"),description:(0,n.__)("Displays the media aspect ratio.","x3p0-media-data")},{name:"camera",title:(0,n.__)("Camera","x3p0-media-data"),description:(0,n.__)("Displays the camera model.","x3p0-media-data")},{name:"created_timestamp",title:(0,n.__)("Created","x3p0-media-data"),description:(0,n.__)("Displays when the media was created.","x3p0-media-data"),icon:q.year},{name:"dimensions",title:(0,n.__)("Dimensions","x3p0-media-data"),description:(0,n.__)("Displays the media dimensions (width × height).","x3p0-media-data")},{name:"display_orientation",title:(0,n.__)("Display Orientation","x3p0-media-data"),description:(0,n.__)("Displays the media display orientation.","x3p0-media-data")},{name:"file_name",title:(0,n.__)("File Name","x3p0-media-data"),description:(0,n.__)("Displays the media file name.","x3p0-media-data")},{name:"file_size",title:(0,n.__)("File Size","x3p0-media-data"),description:(0,n.__)("Displays the media file size.","x3p0-media-data")},{name:"focal_length",title:(0,n.__)("Focal length","x3p0-media-data"),description:(0,n.__)("Displays the camera focal length.","x3p0-media-data")},{name:"genre",title:(0,n.__)("Genre","x3p0-media-data"),description:(0,n.__)("Displays the media genre.","x3p0-media-data")},{name:"length_formatted",title:(0,n.__)("Duration","x3p0-media-data"),description:(0,n.__)("Displays the media length/duration.","x3p0-media-data")},{name:"iso",title:(0,n.__)("ISO","x3p0-media-data"),description:(0,n.__)("Displays the image ISO","x3p0-media-data")},{name:"mime_type",title:(0,n.__)("MIME Type","x3p0-media-data"),description:(0,n.__)("Displays the media MIME type.","x3p0-media-data")},{name:"orientation",title:(0,n.__)("Orientation","x3p0-media-data"),description:(0,n.__)("Displays the media EXIF orientation.","x3p0-media-data")},{name:"shutter_speed",title:(0,n.__)("Shutter Speed","x3p0-media-data"),description:(0,n.__)("Displays the camera shutter speed.","x3p0-media-data")},{name:"title",title:(0,n.__)("Title","x3p0-media-data"),description:(0,n.__)("Displays the media title.","x3p0-media-data"),isDefault:!0},{name:"track_number",title:(0,n.__)("Track Number","x3p0-media-data"),description:(0,n.__)("Displays the audio track number.","x3p0-media-data")},{name:"year",title:(0,n.__)("Year","x3p0-media-data"),description:(0,n.__)("Displays the media published year.","x3p0-media-data")}].map(e=>({icon:q?.[e.name]||null,attributes:{field:e.name},scope:["inserter"],isActive:["field"],...e}));(0,e.registerBlockType)(t,{edit:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z,{...e}),(0,s.jsx)(H,{...e}),(0,s.jsx)(M,{...e})]}),icon:()=>(0,s.jsx)(B.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368",children:(0,s.jsx)(B.Path,{d:"M710-150q-63 0-106.5-43.5T560-300q0-63 43.5-106.5T710-450q63 0 106.5 43.5T860-300q0 63-43.5 106.5T710-150Zm0-80q29 0 49.5-20.5T780-300q0-29-20.5-49.5T710-370q-29 0-49.5 20.5T640-300q0 29 20.5 49.5T710-230Zm-550-30v-80h320v80H160Zm90-250q-63 0-106.5-43.5T100-660q0-63 43.5-106.5T250-810q63 0 106.5 43.5T400-660q0 63-43.5 106.5T250-510Zm0-80q29 0 49.5-20.5T320-660q0-29-20.5-49.5T250-730q-29 0-49.5 20.5T180-660q0 29 20.5 49.5T250-590Zm230-30v-80h320v80H480Zm230 320ZM250-660Z"})}),variations:D})})();